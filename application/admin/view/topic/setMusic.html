<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音乐列表 | Nifty - Admin ThinkPHP</title>
    <!--STYLESHEET-->
    <link href="__LAYUI__css/layui.css" rel="stylesheet" >
    <link href='__ADMIN__css/font-face.css' rel='stylesheet' type='text/css'>
    <link href="__ADMIN__css/bootstrap.min.css" rel="stylesheet">
    <link href="__ADMIN__css/nifty.min.css" rel="stylesheet">
    <link href="__ADMIN__css/demo/nifty-demo-icons.min.css" rel="stylesheet">
    <link href="__ADMIN__css/demo/nifty-demo.min.css" rel="stylesheet">
    <link href="__ADMIN__plugins/magic-check/css/magic-check.min.css" rel="stylesheet">
    <link href="__ADMIN__plugins/bootstrap-select/bootstrap-select.min.css" rel="stylesheet">
    <link href="__ADMIN__plugins/bootstrap-tagsinput/bootstrap-tagsinput.min.css" rel="stylesheet">
    <link href="__ADMIN__plugins/select2/css/select2.min.css" rel="stylesheet">
    <link href="__ADMIN__plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="__ADMIN__plugins/ionicons/css/ionicons.min.css" rel="stylesheet">
    <link href="__ADMIN__plugins/morris-js/morris.min.css" rel="stylesheet">
    <link href="__ADMIN__plugins/summernote/summernote.min.css" rel="stylesheet">
    <link href="__ADMIN__plugins/pace/pace.min.css" rel="stylesheet">

    <!--JAVASCRIPT-->
    <script src="__ADMIN__js/jquery-2.2.4.min.js"></script>
    <script src="__ADMIN__js/jquery.cookie.js"></script>
    <script src="__ADMIN__js/bootstrap.min.js"></script>
    <script src="__ADMIN__js/nifty.min.js"></script>
    <script src="__ADMIN__js/demo/nifty-demo.min.js"></script>
    <script src="__ADMIN__plugins/pace/pace.min.js"></script>
    <script src="__LAYUI__layui.js"></script>
    <script src="__ADMIN__plugins/validform/validform.js"></script>
    <script src="__ADMIN__plugins/bootstrap-select/bootstrap-select.min.js"></script>
    <script src="__ADMIN__plugins/select2/js/select2.min.js"></script>
    <script src="__ADMIN__js/myself.min.js"></script>
</head>
<body>
<!--Page content-->
<!--===================================================-->
<div id="page-content">
    <div class="row">
        <div class="panel">
            <div class="panel-heading">
                <h3 class="panel-title">所有音乐</h3>
            </div>

            <!--Data Table-->
            <!--===================================================-->
            <div class="panel-body">
                <div class="pad-btm form-inline">
                    <div class="row">
                        <form action="{:url('/admin/topic/setMusic')}" method="get">
                            <div class="col-sm-6 table-toolbar-left">
                                <div class="form-group">
                                    <input id="demo-input-search2" type="text" placeholder="搜索关键字、ID"
                                           class="form-control" autocomplete="off" name="keyword" value="{$Think.get.keyword}">
                                </div>
                                <div class="btn-group">
                                    <button class="btn btn-default"><i class="fa fa-search"></i></button>
                                    <a href="{:url('/admin/topic/setMusic')}" class="btn btn-default">清空搜索</a>
                                </div>
                                <div class="btn-group">
                                    <a href="javascript:void(0)" class="btn btn-primary pull-left" onclick="checkThis(1)">全选</a>
                                    <a href="javascript:void(0)" class="btn btn-info pull-left" onclick="checkThis(2)">全不选</a>
                                    <a href="javascript:void(0)" class="btn btn-purple pull-left" onclick="checkThis(3)">反选</a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-bordered table-hover toggle-circle" data-page-size="7">
                        <thead>
                        <tr>
                            <th></th>
                            <th>ID</th>
                            <th>歌曲</th>
                            <th>标签</th>
                            <th>类型</th>
                            <th>大小</th>
                            <th>添加时间</th>
                        </tr>
                        </thead>
                        <tbody class="form-horizontal">
                        {volist name='list' id='item' key='key' empty='暂无数据'}
                        <tr>
                            <td>
                                <input id="checkbox-{$key}" class="magic-checkbox" type="checkbox" value="{$item.id}" >
                                <label for="checkbox-{$key}"></label>
                            </td>
                            <td>{$item.id}</td>
                            <td>{$item.title|str_cut=###,20}</td>
                            <td>{$item.tags|str_cut=###,20}</td>
                            <td>{$item.lang_id}</td>
                            <td>{$item.size}</td>
                            <td>{$item.addtime|date="Y-m-d H:i:s",###}</td>
                        </tr>
                        {/volist}
                        </tbody>
                    </table>
                    <div class="text-right">
                        {$list->render()}
                    </div>
                </div>
            </div>
        </div>
        <!--===================================================-->
        <!--End Data Table-->

    </div>


</div>
<script>
    $(function () {
        //获取已经用户之前已经选择的产品应用领域，并将其选中
        var ids = $("#musicList input[type='checkbox']", window.parent.document);
        ids.each(function (e, v) {
            $("input[value='"+$(v).val()+"']").prop("checked",true);
        })
        /*$("#confirm").on("click",function () {
            var input = $("input[type=checkbox]:checked");
            var ids = '';
            input.each(function (e,v) {
                ids += $(v).val() + ',';
            })
            ids = ids.substring(0,ids.length-1);
            console.log($(".form-horizontal"))
            $("input[name='musicId']", window.parent.document).val(ids);
            //var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
            //parent.layer.close(index);
        })*/
    })
</script>
</body>
</html>

